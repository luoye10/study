<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <div></div>
        <div></div>
        <div></div>
        <script>
            /**
             *
             *  Set
             *      成员唯一不重复
             *      可以接受一个数组或者具有 iterable 接口的其他数据结构作为参数
             *      向 Set 加入值的时候，类型是不会发生转换的
             *      对象作为值加入的时候，总是不相等的
             *
             *      属性
             *          constructor
             *              构造函数，默认就是 Set 函数
             *          size
             *              Set 实例的成员总数
             *
             */
            let s = new Set([1, 2, 3, 11, 1, 22, 2, 13, 3]);
            console.log(s);
            let s2 = new Set([11, 22, 33, 44, 55]);
            console.log(Set === Set.prototype.constructor, s2.size);
            let set = new Set(document.querySelectorAll('div'));
            console.log(set, set.size);
            let res = set.add({});
            console.log(set, set.size);
            let ret = set.add({});
            console.log(set, set.size);

            // 数组去重
            console.log([...new Set([1, 2, 11, 12, 13, 1, 3, 11, 22, 2])]);
            // 去除字符串里面的重复字符
            console.log([...new Set('absdabfdsxnba')].join(''));

            /**
             *
             *  方法
             *      add(value) 添加某个值，返回 Set 本身
             *      delete(value) 删除某个值，返回一个布尔值，表示删除是否成功
             *      has(value) 返回一个布尔值，表示该值是否是 Set 的成员
             *      clear() 清除所有成员，返回值是 undefined
             *
             */
            let s3 = new Set([11, 22, 33, 44, 55]);
            let s4 = new Set([1, 2, 3, 4]);
            console.log(s3.add('hello'));
            // console.log(s3.delete(11));
            console.log(s3.has(33));
            console.log(s4.clear());

            // 判断是否包含一个键
            // 对象
            let obj = {
                name: 'tom',
                age: 22
            };
            if (obj.name) {
                console.log(obj.name);
            }
            // Set
            let s5 = new Set();
            s5.add('name');
            s5.add('age');
            if (s5.has('name')) {
                console.log('yes');
            }

            // Array.from 可以将 Set 结构转换为数组
            // 数组去重
            let arr = [1, 11, 2, 12, 1, 3, 22, 2];
            let newArr = Array.from(new Set(arr));
            let sort = newArr.sort((a, b) => a - b);
            console.log(sort);

            /**
             *
             *  遍历
             *      Set 的遍历顺序就是插入顺序
             *      keys()
             *          返回键名的遍历器
             *      values()
             *          返回键值的遍历器
             *      entries()
             *          返回键值对的遍历器
             *      forEach(callbackFn)
             *          使用回调函数遍历每个成员
             *          参数是一个处理函数，该函数的参数三个，键名，键值，集合本身
             *          Set 结构的键名就是键值，因此第一个参数和第二个参数的值是一样的
             *
             *
             *
             *
             *
             */
            let s6 = new Set(['hello', 'name', 'hi']);
            console.log(s6.keys(), s6.values(), s6.entries());
            console.log(
                s6.forEach((value, key) => {
                    return key + ' : ' + value;
                })
            );

            // 遍历的应用
            // 1、扩展运算符(...)内部使用 for...of 循环，所以可以用于 set 结构
            let st = new Set(['red', 'blue', 'green']);
            let colorArr = [...st];
            console.log(colorArr);
            // 数组去重
            let num = new Set([11, 2, 10, 24, 2, 10, 30, 11]);
            let numArr = [...num];
            console.log(numArr);
            // 数组的 map 和 filter
            let map = new Set([1, 2, 3, 4, 5].map(x => x * 2));
            let filt = new Set([1, 2, 3, 4, 5].filter(x => x % 2 === 0));
            console.log(map);
            console.log(filt);
            // 并集(union)，交集(intersect)，差集(difference)
            let a = new Set([1, 2, 3]);
            let b = new Set([2, 3, 4]);
            // a和b的并集
            let union = new Set([...a, ...b]);
            console.log(union);
            // a和b的交集
            let intersect = new Set([...a].filter(x => b.has(x)));
            console.log(intersect);
            // a相对于b的差集
            let difference = new Set([...a].filter(x => !b.has(x)));
            console.log(difference);
        </script>
    </body>
</html>
