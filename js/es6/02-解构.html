<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>解构赋值</title>
</head>
<body>
    <script>
        // 数组的解构赋值
        let [a,b,c] = [10,50,15];
        console.log(a + ', ' + c);
        let [x, ...y] = [15,56,88,55,65];
        console.log(x + ', ' + '(' + y + ')');
        let [m, , ,n] = [15,58,88,74];
        console.log(m + ', ' + n);
        let [w,t] = [45,50,86,99];
        console.log(w + ', ' + t);
        // 如果解构不成功，变量的值就是 undefined
        let [f,l,p] = [10];
        console.log(f,l,p);
        // 解构赋值可以指定默认值
        let [first, last = 'hello'] = [20];
        console.log(first,last);
        // 默认值可以引用解构赋值的其他变量，但该变量必须已经声明
        let [o = 1,r = o] = [];
        console.log(o,r);

        // 对象的解构赋值
        let person = {
            name: 'lily',
            age: 20,
            gender: '女'
        };
        let {name:nm, age:ag, gender:gd } = person;
        console.log(nm, ag, gd);
        const {log} = console;
        log('hello');
        let obj = {
            arr: [
                'hello',
                {
                    k: 'world'
                }
            ]
        };
        let {arr, arr: [str, {k}]} = obj;
        log(arr, str, k);
        let node = {
            loc: {
                start: {
                    line: 'line',
                    index: 'index'
                }
            }
        };
        let {loc, loc: {start}, loc: {start: {line}}} = node;
        log(loc, start, line);

        // 函数参数的解构赋值
        function add([one,two]){
            return one + two;
        };
        log(add([12,42]));
        let arr2 = [[15,16],[42,46]].map(([ax,bx]) => ax + bx);
        log(arr2);
        // 函数参数解构的默认值
        function move({ay = 4, by = 5} = {}){
            console.log([ay,by]) ;
        };
        move();
        move({});
        move({ay:10});
        move({ay:10,by:20});
        function remove({ay,by} = {ay: 4, by: 5}){
            console.log([ay,by]);
        }
        remove();
        remove({});
        remove({ay:10});
        remove({ay:10,by:20});

        // 解构赋值的用途
        // 1、交换变量的值
        let [e,q] = [10,15];
        [e,q] = [q,e];
        log(e,q);

        // 2、可以从函数返回多个值
        function fun(){
            return [1,2,3];
        }
        let [a1,a2,a3] = fun();
        console.log(a1,a2,a3);
        function fn(){
            return {
                foo: 'hello',
                bar: 'world'
            }
        }
        let {foo,bar} = fn();
        console.log(foo,bar);

        // 3、函数参数的定义
        function fo([b1,b2,b3]){
            console.log(b1,b2,b3);
        }
        fo([3,4,5]);
        function br({bb,cc,aa}){
            console.log(aa,bb,cc);
        }
        br({aa:7,bb:8,cc:9});

        // 4、提取 JSON 数据
        let jsonData = {
            id: 10,
            status: 'yes',
            data: {
                start: 10,
                end: 20
            }
        }
        let {id,status,data:object} = jsonData;
        console.log(id,status,object);

        // 5、遍历 Map 结构
        let map = new Map();
        map.set('myName', 'tom');
        map.set('work', 'teacher');
        for(let [key,value] of map){
            console.log(key + ' is ' + value)
        }
    </script>
</body>
</html>
